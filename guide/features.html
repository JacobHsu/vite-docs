<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>
      功能 | Vite 官方中文文档
    </title>
    <meta name="description" content="下一代前端开发与构建工具">
    <link rel="stylesheet" href="/vite-docs/assets/style.acadeef6.css">
    <link rel="modulepreload" href="/vite-docs/assets/Home.b843b6af.js">
    <link rel="modulepreload" href="/vite-docs/assets/CarbonAds.2d9c88d0.js">
    <link rel="modulepreload" href="/vite-docs/assets/app.a2203fca.js">
    <link rel="modulepreload" href="/vite-docs/assets/guide_features.md.32107325.lean.js">
    <link rel="modulepreload" href="/vite-docs/assets/app.a2203fca.js">
    <link rel="icon" type="image/svg+xml" href="/logo.svg">
    
  </head>
  <body>
    <div id="app"><!--[--><div class="theme"><header class="nav-bar" data-v-c0a2c60c><div class="sidebar-button" data-v-c0a2c60c><svg class="icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z" class></path></svg></div><a class="nav-bar-title" href="/vite-docs/" aria-label="Vite 官方中文文档, back to home" data-v-c0a2c60c data-v-7a4ac696><img class="logo" src="/vite-docs/logo.svg" alt="Logo" data-v-7a4ac696> Vite 官方中文文档</a><div class="flex-grow" data-v-c0a2c60c></div><div class="nav" data-v-c0a2c60c><nav class="nav-links" data-v-c0a2c60c data-v-f73db414><!--[--><div class="item" data-v-f73db414><div class="nav-link" data-v-f73db414 data-v-3f935ff0><a class="item" href="/vite-docs/guide/" data-v-3f935ff0>指引 <!----></a></div></div><div class="item" data-v-f73db414><div class="nav-link" data-v-f73db414 data-v-3f935ff0><a class="item" href="/vite-docs/config/" data-v-3f935ff0>配置 <!----></a></div></div><div class="item" data-v-f73db414><div class="nav-link" data-v-f73db414 data-v-3f935ff0><a class="item" href="/vite-docs/plugins/" data-v-3f935ff0>插件 <!----></a></div></div><div class="item" data-v-f73db414><div class="nav-dropdown-link" data-v-f73db414 data-v-138c8ccb><button class="button" data-v-138c8ccb><span class="button-text" data-v-138c8ccb>相关链接</span><span class="right button-arrow" data-v-138c8ccb></span></button><ul class="dialog" data-v-138c8ccb><!--[--><li class="dialog-item" data-v-138c8ccb><div class="nav-dropdown-link-item" data-v-138c8ccb data-v-63eb7c02><a class="item isExternal" href="https://twitter.com/vite_js" target="_blank" rel="noopener noreferrer" data-v-63eb7c02><span class="arrow" data-v-63eb7c02></span><span class="text" data-v-63eb7c02>Twitter</span><span class="icon" data-v-63eb7c02><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-63eb7c02><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></span></a></div></li><li class="dialog-item" data-v-138c8ccb><div class="nav-dropdown-link-item" data-v-138c8ccb data-v-63eb7c02><a class="item isExternal" href="https://chat.vitejs.dev" target="_blank" rel="noopener noreferrer" data-v-63eb7c02><span class="arrow" data-v-63eb7c02></span><span class="text" data-v-63eb7c02>Discord Chat</span><span class="icon" data-v-63eb7c02><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-63eb7c02><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></span></a></div></li><li class="dialog-item" data-v-138c8ccb><div class="nav-dropdown-link-item" data-v-138c8ccb data-v-63eb7c02><a class="item isExternal" href="https://github.com/vitejs/awesome-vite" target="_blank" rel="noopener noreferrer" data-v-63eb7c02><span class="arrow" data-v-63eb7c02></span><span class="text" data-v-63eb7c02>Awesome Vite</span><span class="icon" data-v-63eb7c02><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-63eb7c02><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></span></a></div></li><li class="dialog-item" data-v-138c8ccb><div class="nav-dropdown-link-item" data-v-138c8ccb data-v-63eb7c02><a class="item isExternal" href="https://dev.to/t/vite" target="_blank" rel="noopener noreferrer" data-v-63eb7c02><span class="arrow" data-v-63eb7c02></span><span class="text" data-v-63eb7c02>Dev.to 社区</span><span class="icon" data-v-63eb7c02><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-63eb7c02><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></span></a></div></li><li class="dialog-item" data-v-138c8ccb><div class="nav-dropdown-link-item" data-v-138c8ccb data-v-63eb7c02><a class="item isExternal" href="https://vite-rollup-plugins.patak.dev/" target="_blank" rel="noopener noreferrer" data-v-63eb7c02><span class="arrow" data-v-63eb7c02></span><span class="text" data-v-63eb7c02>Rollup 插件兼容</span><span class="icon" data-v-63eb7c02><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-63eb7c02><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></span></a></div></li><li class="dialog-item" data-v-138c8ccb><div class="nav-dropdown-link-item" data-v-138c8ccb data-v-63eb7c02><a class="item isExternal" href="https://github.com/vitejs/vite/blob/main/packages/vite/CHANGELOG.md" target="_blank" rel="noopener noreferrer" data-v-63eb7c02><span class="arrow" data-v-63eb7c02></span><span class="text" data-v-63eb7c02>更新日志</span><span class="icon" data-v-63eb7c02><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-63eb7c02><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></span></a></div></li><!--]--></ul></div></div><div class="item" data-v-f73db414><div class="nav-dropdown-link" data-v-f73db414 data-v-138c8ccb><button class="button" data-v-138c8ccb><span class="button-text" data-v-138c8ccb>多语言</span><span class="right button-arrow" data-v-138c8ccb></span></button><ul class="dialog" data-v-138c8ccb><!--[--><li class="dialog-item" data-v-138c8ccb><div class="nav-dropdown-link-item" data-v-138c8ccb data-v-63eb7c02><a class="item isExternal" href="https://cn.vitejs.dev" target="_blank" rel="noopener noreferrer" data-v-63eb7c02><span class="arrow" data-v-63eb7c02></span><span class="text" data-v-63eb7c02>简体中文</span><span class="icon" data-v-63eb7c02><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-63eb7c02><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></span></a></div></li><li class="dialog-item" data-v-138c8ccb><div class="nav-dropdown-link-item" data-v-138c8ccb data-v-63eb7c02><a class="item isExternal" href="https://vitejs.dev" target="_blank" rel="noopener noreferrer" data-v-63eb7c02><span class="arrow" data-v-63eb7c02></span><span class="text" data-v-63eb7c02>English</span><span class="icon" data-v-63eb7c02><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-63eb7c02><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></span></a></div></li><!--]--></ul></div></div><!--]--><!----><div class="item" data-v-f73db414><div class="nav-link" data-v-f73db414 data-v-3f935ff0><a class="item isExternal" href="https://github.com/vitejs/docs-cn" target="_blank" rel="noopener noreferrer" data-v-3f935ff0>GitHub <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-3f935ff0><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div></nav></div><!--[--><!--]--></header><aside class="sidebar" data-v-4b92f82c><nav class="nav-links nav" data-v-4b92f82c data-v-f73db414><!--[--><div class="item" data-v-f73db414><div class="nav-link" data-v-f73db414 data-v-3f935ff0><a class="item" href="/vite-docs/guide/" data-v-3f935ff0>指引 <!----></a></div></div><div class="item" data-v-f73db414><div class="nav-link" data-v-f73db414 data-v-3f935ff0><a class="item" href="/vite-docs/config/" data-v-3f935ff0>配置 <!----></a></div></div><div class="item" data-v-f73db414><div class="nav-link" data-v-f73db414 data-v-3f935ff0><a class="item" href="/vite-docs/plugins/" data-v-3f935ff0>插件 <!----></a></div></div><div class="item" data-v-f73db414><div class="nav-dropdown-link" data-v-f73db414 data-v-138c8ccb><button class="button" data-v-138c8ccb><span class="button-text" data-v-138c8ccb>相关链接</span><span class="right button-arrow" data-v-138c8ccb></span></button><ul class="dialog" data-v-138c8ccb><!--[--><li class="dialog-item" data-v-138c8ccb><div class="nav-dropdown-link-item" data-v-138c8ccb data-v-63eb7c02><a class="item isExternal" href="https://twitter.com/vite_js" target="_blank" rel="noopener noreferrer" data-v-63eb7c02><span class="arrow" data-v-63eb7c02></span><span class="text" data-v-63eb7c02>Twitter</span><span class="icon" data-v-63eb7c02><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-63eb7c02><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></span></a></div></li><li class="dialog-item" data-v-138c8ccb><div class="nav-dropdown-link-item" data-v-138c8ccb data-v-63eb7c02><a class="item isExternal" href="https://chat.vitejs.dev" target="_blank" rel="noopener noreferrer" data-v-63eb7c02><span class="arrow" data-v-63eb7c02></span><span class="text" data-v-63eb7c02>Discord Chat</span><span class="icon" data-v-63eb7c02><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-63eb7c02><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></span></a></div></li><li class="dialog-item" data-v-138c8ccb><div class="nav-dropdown-link-item" data-v-138c8ccb data-v-63eb7c02><a class="item isExternal" href="https://github.com/vitejs/awesome-vite" target="_blank" rel="noopener noreferrer" data-v-63eb7c02><span class="arrow" data-v-63eb7c02></span><span class="text" data-v-63eb7c02>Awesome Vite</span><span class="icon" data-v-63eb7c02><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-63eb7c02><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></span></a></div></li><li class="dialog-item" data-v-138c8ccb><div class="nav-dropdown-link-item" data-v-138c8ccb data-v-63eb7c02><a class="item isExternal" href="https://dev.to/t/vite" target="_blank" rel="noopener noreferrer" data-v-63eb7c02><span class="arrow" data-v-63eb7c02></span><span class="text" data-v-63eb7c02>Dev.to 社区</span><span class="icon" data-v-63eb7c02><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-63eb7c02><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></span></a></div></li><li class="dialog-item" data-v-138c8ccb><div class="nav-dropdown-link-item" data-v-138c8ccb data-v-63eb7c02><a class="item isExternal" href="https://vite-rollup-plugins.patak.dev/" target="_blank" rel="noopener noreferrer" data-v-63eb7c02><span class="arrow" data-v-63eb7c02></span><span class="text" data-v-63eb7c02>Rollup 插件兼容</span><span class="icon" data-v-63eb7c02><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-63eb7c02><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></span></a></div></li><li class="dialog-item" data-v-138c8ccb><div class="nav-dropdown-link-item" data-v-138c8ccb data-v-63eb7c02><a class="item isExternal" href="https://github.com/vitejs/vite/blob/main/packages/vite/CHANGELOG.md" target="_blank" rel="noopener noreferrer" data-v-63eb7c02><span class="arrow" data-v-63eb7c02></span><span class="text" data-v-63eb7c02>更新日志</span><span class="icon" data-v-63eb7c02><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-63eb7c02><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></span></a></div></li><!--]--></ul></div></div><div class="item" data-v-f73db414><div class="nav-dropdown-link" data-v-f73db414 data-v-138c8ccb><button class="button" data-v-138c8ccb><span class="button-text" data-v-138c8ccb>多语言</span><span class="right button-arrow" data-v-138c8ccb></span></button><ul class="dialog" data-v-138c8ccb><!--[--><li class="dialog-item" data-v-138c8ccb><div class="nav-dropdown-link-item" data-v-138c8ccb data-v-63eb7c02><a class="item isExternal" href="https://cn.vitejs.dev" target="_blank" rel="noopener noreferrer" data-v-63eb7c02><span class="arrow" data-v-63eb7c02></span><span class="text" data-v-63eb7c02>简体中文</span><span class="icon" data-v-63eb7c02><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-63eb7c02><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></span></a></div></li><li class="dialog-item" data-v-138c8ccb><div class="nav-dropdown-link-item" data-v-138c8ccb data-v-63eb7c02><a class="item isExternal" href="https://vitejs.dev" target="_blank" rel="noopener noreferrer" data-v-63eb7c02><span class="arrow" data-v-63eb7c02></span><span class="text" data-v-63eb7c02>English</span><span class="icon" data-v-63eb7c02><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-63eb7c02><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></span></a></div></li><!--]--></ul></div></div><!--]--><!----><div class="item" data-v-f73db414><div class="nav-link" data-v-f73db414 data-v-3f935ff0><a class="item isExternal" href="https://github.com/vitejs/docs-cn" target="_blank" rel="noopener noreferrer" data-v-3f935ff0>GitHub <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-3f935ff0><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div></nav><!--[--><!--]--><ul class="sidebar-links" data-v-4b92f82c><!--[--><li class="sidebar-link" data-v-4b92f82c data-v-4b92f82c><p class="sidebar-link-item" data-v-4b92f82c>指引</p><ul class="sidebar-links" data-v-4b92f82c><li class="sidebar-link" data-v-4b92f82c data-v-4b92f82c><a class="sidebar-link-item" href="/vite-docs/guide/why" data-v-4b92f82c>为什么选 Vite</a><!----></li><li class="sidebar-link" data-v-4b92f82c data-v-4b92f82c><a class="sidebar-link-item" href="/vite-docs/guide/" data-v-4b92f82c>开始</a><!----></li><li class="sidebar-link" data-v-4b92f82c data-v-4b92f82c><a class="sidebar-link-item active" href="/vite-docs/guide/features" data-v-4b92f82c>功能</a><ul class="sidebar-links" data-v-4b92f82c><li class="sidebar-link" data-v-4b92f82c data-v-4b92f82c><a class="sidebar-link-item" href="#npm-dependency-resolving-and-pre-bundling" data-v-4b92f82c>NPM 依赖解析和预构建</a><!----></li><li class="sidebar-link" data-v-4b92f82c data-v-4b92f82c><a class="sidebar-link-item" href="#hot-module-replacement" data-v-4b92f82c>模块热重载</a><!----></li><li class="sidebar-link" data-v-4b92f82c data-v-4b92f82c><a class="sidebar-link-item" href="#typescript" data-v-4b92f82c>TypeScript</a><ul class="sidebar-links" data-v-4b92f82c><li class="sidebar-link" data-v-4b92f82c data-v-4b92f82c><a class="sidebar-link-item" href="#client-types" data-v-4b92f82c>客户端类型</a><!----></li></ul></li><li class="sidebar-link" data-v-4b92f82c data-v-4b92f82c><a class="sidebar-link-item" href="#vue" data-v-4b92f82c>Vue</a><!----></li><li class="sidebar-link" data-v-4b92f82c data-v-4b92f82c><a class="sidebar-link-item" href="#jsx" data-v-4b92f82c>JSX</a><!----></li><li class="sidebar-link" data-v-4b92f82c data-v-4b92f82c><a class="sidebar-link-item" href="#css" data-v-4b92f82c>CSS</a><ul class="sidebar-links" data-v-4b92f82c><li class="sidebar-link" data-v-4b92f82c data-v-4b92f82c><a class="sidebar-link-item" href="#import-inlining-and-rebasing" data-v-4b92f82c>@import 内联和变基</a><!----></li><li class="sidebar-link" data-v-4b92f82c data-v-4b92f82c><a class="sidebar-link-item" href="#postcss" data-v-4b92f82c>PostCSS</a><!----></li><li class="sidebar-link" data-v-4b92f82c data-v-4b92f82c><a class="sidebar-link-item" href="#css-modules" data-v-4b92f82c>CSS Modules</a><!----></li><li class="sidebar-link" data-v-4b92f82c data-v-4b92f82c><a class="sidebar-link-item" href="#css-pre-processors" data-v-4b92f82c>CSS 预处理器</a><!----></li></ul></li><li class="sidebar-link" data-v-4b92f82c data-v-4b92f82c><a class="sidebar-link-item" href="#static-assets" data-v-4b92f82c>静态资源处理</a><!----></li><li class="sidebar-link" data-v-4b92f82c data-v-4b92f82c><a class="sidebar-link-item" href="#json" data-v-4b92f82c>JSON</a><!----></li><li class="sidebar-link" data-v-4b92f82c data-v-4b92f82c><a class="sidebar-link-item" href="#glob-import" data-v-4b92f82c>Glob 导入</a><ul class="sidebar-links" data-v-4b92f82c><li class="sidebar-link" data-v-4b92f82c data-v-4b92f82c><a class="sidebar-link-item" href="#glob-import" data-v-4b92f82c>globEager 导入</a><!----></li></ul></li><li class="sidebar-link" data-v-4b92f82c data-v-4b92f82c><a class="sidebar-link-item" href="#webassembly" data-v-4b92f82c>WebAssembly</a><!----></li><li class="sidebar-link" data-v-4b92f82c data-v-4b92f82c><a class="sidebar-link-item" href="#web-workers" data-v-4b92f82c>Web Worker</a><!----></li><li class="sidebar-link" data-v-4b92f82c data-v-4b92f82c><a class="sidebar-link-item" href="#build-optimizations" data-v-4b92f82c>构建优化</a><ul class="sidebar-links" data-v-4b92f82c><li class="sidebar-link" data-v-4b92f82c data-v-4b92f82c><a class="sidebar-link-item" href="#css-code-splitting" data-v-4b92f82c>CSS 代码分割</a><!----></li><li class="sidebar-link" data-v-4b92f82c data-v-4b92f82c><a class="sidebar-link-item" href="#preload-directives-generation" data-v-4b92f82c>预加载指令生成</a><!----></li><li class="sidebar-link" data-v-4b92f82c data-v-4b92f82c><a class="sidebar-link-item" href="#async-chunk-loading-optimization" data-v-4b92f82c>异步 Chunk 加载优化</a><!----></li></ul></li></ul></li><li class="sidebar-link" data-v-4b92f82c data-v-4b92f82c><a class="sidebar-link-item" href="/vite-docs/guide/using-plugins" data-v-4b92f82c>使用插件</a><!----></li><li class="sidebar-link" data-v-4b92f82c data-v-4b92f82c><a class="sidebar-link-item" href="/vite-docs/guide/dep-pre-bundling" data-v-4b92f82c>依赖预构建</a><!----></li><li class="sidebar-link" data-v-4b92f82c data-v-4b92f82c><a class="sidebar-link-item" href="/vite-docs/guide/assets" data-v-4b92f82c>静态资源处理</a><!----></li><li class="sidebar-link" data-v-4b92f82c data-v-4b92f82c><a class="sidebar-link-item" href="/vite-docs/guide/build" data-v-4b92f82c>构建生产版本</a><!----></li><li class="sidebar-link" data-v-4b92f82c data-v-4b92f82c><a class="sidebar-link-item" href="/vite-docs/guide/static-deploy" data-v-4b92f82c>部署静态站点</a><!----></li><li class="sidebar-link" data-v-4b92f82c data-v-4b92f82c><a class="sidebar-link-item" href="/vite-docs/guide/env-and-mode" data-v-4b92f82c>环境变量与模式</a><!----></li><li class="sidebar-link" data-v-4b92f82c data-v-4b92f82c><a class="sidebar-link-item" href="/vite-docs/guide/ssr" data-v-4b92f82c>服务端渲染（SSR）</a><!----></li><li class="sidebar-link" data-v-4b92f82c data-v-4b92f82c><a class="sidebar-link-item" href="/vite-docs/guide/backend-integration" data-v-4b92f82c>后端集成</a><!----></li><li class="sidebar-link" data-v-4b92f82c data-v-4b92f82c><a class="sidebar-link-item" href="/vite-docs/guide/comparisons" data-v-4b92f82c>比较</a><!----></li><li class="sidebar-link" data-v-4b92f82c data-v-4b92f82c><a class="sidebar-link-item" href="/vite-docs/guide/migration" data-v-4b92f82c>从 v1 迁移</a><!----></li></ul></li><li class="sidebar-link" data-v-4b92f82c data-v-4b92f82c><p class="sidebar-link-item" data-v-4b92f82c>API</p><ul class="sidebar-links" data-v-4b92f82c><li class="sidebar-link" data-v-4b92f82c data-v-4b92f82c><a class="sidebar-link-item" href="/vite-docs/guide/api-plugin" data-v-4b92f82c>插件 API</a><!----></li><li class="sidebar-link" data-v-4b92f82c data-v-4b92f82c><a class="sidebar-link-item" href="/vite-docs/guide/api-hmr" data-v-4b92f82c>HMR API</a><!----></li><li class="sidebar-link" data-v-4b92f82c data-v-4b92f82c><a class="sidebar-link-item" href="/vite-docs/guide/api-javascript" data-v-4b92f82c>JavaScript API</a><!----></li><li class="sidebar-link" data-v-4b92f82c data-v-4b92f82c><a class="sidebar-link-item" href="/vite-docs/config/" data-v-4b92f82c>配置参考</a><!----></li></ul></li><!--]--></ul><!--[--><!--[--><div class="sponsors" data-v-4b92f82c><a href="https://github.com/sponsors/yyx990803" target="_blank" rel="noopener" data-v-4b92f82c><span data-v-4b92f82c>Sponsors</span></a><a href="https://tailwindcss.com" target="_blank" rel="noopener" aria-label="sponsor-img" data-v-4b92f82c><img src="/tailwind-labs.svg" alt="Tailwind Labs" id="sponsor-tailwind" data-v-4b92f82c></a><a href="https://vuejobs.com/?ref=vuejs" target="_blank" rel="noopener" aria-label="sponsor-img" data-v-4b92f82c><img src="/vuejobs.png" alt="Vue Jobs" id="sponsor-vuejobs" data-v-4b92f82c></a><a href="https://mux.com" target="_blank" rel="noopener" aria-label="sponsor-img" data-v-4b92f82c><img src="/mux.svg" alt="Mux" id="sponsor-mux" data-v-4b92f82c></a><a href="https://plaid.co.jp/" target="_blank" rel="noopener" aria-label="sponsor-img" data-v-4b92f82c><img src="/plaid.svg" alt="Plaid Inc." id="sponsor-plaid" data-v-4b92f82c></a></div><!--]--><!--]--></aside><!-- TODO: make this button accessible --><div class="sidebar-mask"></div><main class="page" data-v-2b25a7d0><div class="container" data-v-2b25a7d0><!--[--><!--[--><div id="ads-container" data-v-2b25a7d0-s><div class="carbon-ads" data-v-3857f609></div></div><!--]--><!--[--><!--]--><!--]--><div class="content" data-v-2b25a7d0><div data-v-2b25a7d0><h1 id="features"><a class="header-anchor" href="#features" aria-hidden="true">#</a> 功能</h1><p>对非常基础的使用来说，使用 Vite 开发和使用一个静态文件服务器并没有太大区别。然而，Vite 还通过原生 ESM 导入提供了许多主要用于打包场景的增强功能。</p><h2 id="npm-dependency-resolving-and-pre-bundling"><a class="header-anchor" href="#npm-dependency-resolving-and-pre-bundling" aria-hidden="true">#</a> NPM 依赖解析和预构建</h2><p>原生 ES 导入不支持下面这样的裸模块导入：</p><div class="language-js"><pre><code><span class="token keyword">import</span> <span class="token punctuation">{</span> someMethod <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;my-dep&#39;</span>
</code></pre></div><p>上面的代码会在浏览器中抛出一个错误。Vite 将会检测到所有被加载的源文件中的此类裸模块导入，并执行以下操作:</p><ol><li><p><a href="./dep-pre-bundling.html">预构建</a> 它们以加快页面加载速度，并将 CommonJS / UMD 转换为 ESM 格式。预构建这一步由 <a href="http://esbuild.github.io/" target="_blank" rel="noopener noreferrer">esbuild</a> 执行，这使得 Vite 的冷启动时间比任何基于 JavaScript 的打包器都要快得多。</p></li><li><p>重写导入为合法的 URL，例如 <code>/node_modules/.vite/my-dep.js?v=f3sf2ebd</code> 以便浏览器能够正确导入它们。</p></li></ol><p><strong>依赖是强缓存的</strong></p><p>Vite 通过 HTTP 头来缓存请求得到的依赖，所以如果你想要编辑或调试一个依赖，请跟随 <a href="./dep-pre-bundling.html#浏览器缓存">这里</a> 的步骤。</p><h2 id="hot-module-replacement"><a class="header-anchor" href="#hot-module-replacement" aria-hidden="true">#</a> 模块热重载</h2><p>Vite 提供了一套原生 ESM 的 <a href="./api-hmr.html">HMR API</a>。 具有 HMR 功能的框架可以利用该 API 提供即时、准确的更新，而无需重新加载页面或清除应用程序状态。Vite 内置了 HMR 到 <a href="https://github.com/vitejs/vite/tree/main/packages/plugin-vue" target="_blank" rel="noopener noreferrer">Vue 单文件组件（SFC）</a> 和 <a href="https://github.com/vitejs/vite/tree/main/packages/plugin-react-refresh" target="_blank" rel="noopener noreferrer">React Fast Refresh</a> 中。也通过 <a href="https://github.com/JoviDeCroock/prefresh/tree/main/packages/vite" target="_blank" rel="noopener noreferrer">@prefresh/vite</a> 对 Preact 实现了官方集成。</p><p>注意，你不需要手动设置这些 —— 当你通过 <a href="./"><code>create-vite</code></a> 创建应用程序时，所选模板已经为你预先配置了这些。</p><h2 id="typescript"><a class="header-anchor" href="#typescript" aria-hidden="true">#</a> TypeScript</h2><p>Vite 天然支持引入 <code>.ts</code> 文件。</p><p>Vite 仅执行 <code>.ts</code> 文件的转译工作，并 <strong>不</strong> 执行任何类型检查。并假设类型检查已经被你的 IDE 或构建过程接管了（你可以在构建脚本中运行 <code>tsc --noEmit</code> 或者安装 <code>vue-tsc</code> 然后运行 <code>vue-tsc --noEmit</code> 来对你的 <code>*.vue</code> 文件做类型检查）。</p><p>Vite 使用 <a href="https://github.com/evanw/esbuild" target="_blank" rel="noopener noreferrer">esbuild</a> 将 TypeScript 转译到 JavaScript，约是 <code>tsc</code> 速度的 20~30 倍，同时 HMR 更新反映到浏览器的时间小于 50ms。</p><p>注意因为 <code>esbuild</code> 只执行转译工作而不含类型信息，所以它不支持 TypeScript 的特定功能例如常量枚举和隐式 “type-only” 导入。你必须在你的 <code>tsconfig.json</code> 中的 <code>compilerOptions</code> 里设置 <code>&quot;isolatedModules&quot;: true</code>，这样 TS 才会警告你哪些功能无法与独立编译模式一同工作。</p><h3 id="client-types"><a class="header-anchor" href="#client-types" aria-hidden="true">#</a> 客户端类型</h3><p>Vite 默认的类型定义是写给它的 Node.js API 的。要将其补充到一个 Vite 应用的客户端代码环境中，请添加一个 <code>d.ts</code> 声明文件：</p><div class="language-typescript"><pre><code><span class="token comment">/// &lt;reference types=&quot;vite/client&quot; /&gt;</span>
</code></pre></div><p>同时，你也可以将 <code>vite/client</code> 添加到 <code>tsconfig</code> 中的 <code>compilerOptions.types</code> 下：</p><div class="language-json"><pre><code><span class="token punctuation">{</span>
  <span class="token property">&quot;compilerOptions&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;types&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;vite/client&quot;</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>这将会提供以下类型定义补充：</p><ul><li>资源导入 (例如：导入一个 <code>.svg</code> 文件)</li><li><code>import.<wbr>meta.env</code> 上 Vite 注入的环境变量的类型定义</li><li><code>import.<wbr>meta.hot</code> 上的 <a href="./api-hmr.html">HMR API</a> 类型定义</li></ul><h2 id="vue"><a class="header-anchor" href="#vue" aria-hidden="true">#</a> Vue</h2><p>Vite 为 Vue 提供第一优先级支持：</p><ul><li>Vue 3 单文件组件支持：<a href="https://github.com/vitejs/vite/tree/main/packages/plugin-vue" target="_blank" rel="noopener noreferrer">@vitejs/plugin-vue</a></li><li>Vue 3 JSX 支持：<a href="https://github.com/vitejs/vite/tree/main/packages/plugin-vue-jsx" target="_blank" rel="noopener noreferrer">@vitejs/plugin-vue-jsx</a></li><li>Vue 2 支持：<a href="https://github.com/underfin/vite-plugin-vue2" target="_blank" rel="noopener noreferrer">underfin/vite-plugin-vue2</a></li></ul><h2 id="jsx"><a class="header-anchor" href="#jsx" aria-hidden="true">#</a> JSX</h2><p><code>.jsx</code> 和 <code>.tsx</code> 文件同样开箱即用。JSX 的转译同样是通过 <a href="https://esbuild.github.io" target="_blank" rel="noopener noreferrer">esbuild</a>，默认为 React 16 风格。期望在 esbuild 中支持 React 17 风格的 JSX 请看 <a href="https://github.com/evanw/esbuild/issues/334" target="_blank" rel="noopener noreferrer">这里</a>。</p><p>Vue 用户应使用官方提供的 <a href="https://github.com/vitejs/vite/tree/main/packages/plugin-vue-jsx" target="_blank" rel="noopener noreferrer">@vitejs/plugin-vue-jsx</a> 插件，它提供了 Vue 3 特性的支持，包括 HMR，全局组件解析，指令和插槽。</p><p>如果不是在 React 或 Vue 中使用 JSX，自定义的 <code>jsxFactory</code> 和 <code>jsxFragment</code> 可以使用 <a href="/config/#esbuild"><code>esbuild</code> 选项</a> 进行配置。例如对 Preact：</p><div class="language-js"><pre><code><span class="token comment">// vite.config.js</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  esbuild<span class="token operator">:</span> <span class="token punctuation">{</span>
    jsxFactory<span class="token operator">:</span> <span class="token string">&#39;h&#39;</span><span class="token punctuation">,</span>
    jsxFragment<span class="token operator">:</span> <span class="token string">&#39;Fragment&#39;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>更多细节详见 <a href="https://esbuild.github.io/content-types/#jsx" target="_blank" rel="noopener noreferrer">esbuild 文档</a>.</p><p>你可以使用 <code>jsxInject</code>（这是一个仅在 Vite 中使用的选项）为 JSX 注入 helper，以避免手动导入：</p><div class="language-js"><pre><code><span class="token comment">// vite.config.js</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  esbuild<span class="token operator">:</span> <span class="token punctuation">{</span>
    jsxInject<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">import React from &#39;react&#39;</span><span class="token template-punctuation string">`</span></span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="css"><a class="header-anchor" href="#css" aria-hidden="true">#</a> CSS</h2><p>导入 <code>.css</code> 文件将会把内容插入到 <code>&lt;style&gt;</code> 标签中，同时也带有 HMR 支持。也能够以字符串的形式检索处理后的、作为其模块默认导出的 CSS。</p><h3 id="import-inlining-and-rebasing"><a class="header-anchor" href="#import-inlining-and-rebasing" aria-hidden="true">#</a> <code>@import</code>内联和变基</h3><p>Vite 通过 <code>postcss-import</code> 预配置支持了 CSS <code>@import</code> 内联，Vite 的路径别名也遵从 CSS <code>@import</code>。换句话说，所有 CSS <code>url()</code> 引用，即使导入的文件在不同的目录中，也总是自动变基，以确保正确性。</p><p>Sass 和 Less 文件也支持 <code>@import</code> 别名和 URL 变基（具体请参阅 <a href="#css-pre-processors">CSS Pre-processors</a>）。</p><h3 id="postcss"><a class="header-anchor" href="#postcss" aria-hidden="true">#</a> PostCSS</h3><p>如果项目包含有效的 PostCSS 配置 (任何受 <a href="https://github.com/postcss/postcss-load-config" target="_blank" rel="noopener noreferrer">postcss-load-config</a> 支持的格式，例如 <code>postcss.config.js</code>)，它将会自动应用于所有已导入的 CSS。</p><h3 id="css-modules"><a class="header-anchor" href="#css-modules" aria-hidden="true">#</a> CSS Modules</h3><p>任何以 <code>.module.css</code> 为后缀名的 CSS 文件都被认为是一个 <a href="https://github.com/css-modules/css-modules" target="_blank" rel="noopener noreferrer">CSS modules 文件</a>。导入这样的文件会返回一个相应的模块对象：</p><div class="language-css"><pre><code><span class="token comment">/* example.module.css */</span>
<span class="token selector">.red</span> <span class="token punctuation">{</span>
  <span class="token property">color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-js"><pre><code><span class="token keyword">import</span> classes <span class="token keyword">from</span> <span class="token string">&#39;./example.module.css&#39;</span>
document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&#39;foo&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>className <span class="token operator">=</span> classes<span class="token punctuation">.</span>red
</code></pre></div><p>CSS modules 行为可以通过 <a href="/config/#css-modules"><code>css.modules</code> 选项</a> 进行配置。</p><p>如果 <code>css.modules.localsConvention</code> 设置开启了 camelCase 格式变量名转换（例如 <code>localsConvention: &#39;camelCaseOnly&#39;</code>），你还可以使用按名导入。</p><div class="language-js"><pre><code><span class="token comment">// .apply-color -&gt; applyColor</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> applyColor <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;./example.module.css&#39;</span>
document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&#39;foo&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>className <span class="token operator">=</span> applyColor
</code></pre></div><h3 id="css-pre-processors"><a class="header-anchor" href="#css-pre-processors" aria-hidden="true">#</a> CSS 预处理器</h3><p>由于 Vite 的目标仅为现代浏览器，因此建议使用原生 CSS 变量和实现 CSSWG 草案的 PostCSS 插件（例如 <a href="https://github.com/jonathantneal/postcss-nesting" target="_blank" rel="noopener noreferrer">postcss-nesting</a>）来编写简单的、符合未来标准的 CSS。</p><p>话虽如此，但 Vite 也同时提供了对 <code>.scss</code>, <code>.sass</code>, <code>.less</code>, <code>.styl</code> 和 <code>.stylus</code> 文件的内置支持。没有必要为它们安装特定的 Vite 插件，但必须安装相应的预处理器依赖：</p><div class="language-bash"><pre><code><span class="token comment"># .scss and .sass</span>
<span class="token function">npm</span> <span class="token function">install</span> -D sass

<span class="token comment"># .less</span>
<span class="token function">npm</span> <span class="token function">install</span> -D <span class="token function">less</span>

<span class="token comment"># .styl and .stylus</span>
<span class="token function">npm</span> <span class="token function">install</span> -D stylus
</code></pre></div><p>如果是用的是单文件组件，可以通过 <code>&lt;style lang=&quot;sass&quot;&gt;</code>（或其他预处理器）自动开启。</p><p>Vite 为 Sass 和 Less 改进了 <code>@import</code> 解析，以保证 Vite 别名也能被使用。另外，<code>url()</code> 中的相对路径引用的，与根文件不同目录中的 Sass/Less 文件会自动变基以保证正确性。</p><p>由于 Stylus API 限制，<code>@import</code> 别名和 URL 变基不支持 Stylus。</p><p>你还可以通过在文件扩展名前加上 <code>.module</code> 来结合使用 CSS modules 和预处理器，例如 <code>style.module.scss</code>。</p><h2 id="static-assets"><a class="header-anchor" href="#static-assets" aria-hidden="true">#</a> 静态资源处理</h2><p>导入一个静态资源会返回解析后的 URL：</p><div class="language-js"><pre><code><span class="token keyword">import</span> imgUrl <span class="token keyword">from</span> <span class="token string">&#39;./img.png&#39;</span>
document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&#39;hero-img&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>src <span class="token operator">=</span> imgUrl
</code></pre></div><p>添加一些特殊的查询参数可以更改资源被引入的方式：</p><div class="language-js"><pre><code><span class="token comment">// 显式加载资源为一个 URL</span>
<span class="token keyword">import</span> assetAsURL <span class="token keyword">from</span> <span class="token string">&#39;./asset.js?url&#39;</span>
</code></pre></div><div class="language-js"><pre><code><span class="token comment">// 以字符串形式加载资源</span>
<span class="token keyword">import</span> assetAsString <span class="token keyword">from</span> <span class="token string">&#39;./shader.glsl?raw&#39;</span>
</code></pre></div><div class="language-js"><pre><code><span class="token comment">// 加载为 Web Worker</span>
<span class="token keyword">import</span> Worker <span class="token keyword">from</span> <span class="token string">&#39;./worker.js?worker&#39;</span>
</code></pre></div><div class="language-js"><pre><code><span class="token comment">// 在构建时 Web Worker 内联为 base64 字符串</span>
<span class="token keyword">import</span> InlineWorker <span class="token keyword">from</span> <span class="token string">&#39;./worker.js?worker&amp;inline&#39;</span>
</code></pre></div><p>更多细节请见 <a href="./assets.html">静态资源处理</a>。</p><h2 id="json"><a class="header-anchor" href="#json" aria-hidden="true">#</a> JSON</h2><p>JSON 可以被直接导入 —— 同样支持具名导入：</p><div class="language-js"><pre><code><span class="token comment">// 导入整个对象</span>
<span class="token keyword">import</span> json <span class="token keyword">from</span> <span class="token string">&#39;./example.json&#39;</span>
<span class="token comment">// 对一个根字段使用具名导入 —— 有效帮助 treeshaking！</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> field <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;./example.json&#39;</span>
</code></pre></div><h2 id="glob-import"><a class="header-anchor" href="#glob-import" aria-hidden="true">#</a> Glob 导入</h2><p>Vite 支持使用特殊的 <code>import.<wbr>meta.glob</code> 函数从文件系统导入多个模块：</p><div class="language-js"><pre><code><span class="token keyword">const</span> modules <span class="token operator">=</span> <span class="token keyword">import</span><span class="token punctuation">.</span>meta<span class="token punctuation">.</span><span class="token function">glob</span><span class="token punctuation">(</span><span class="token string">&#39;./dir/*.js&#39;</span><span class="token punctuation">)</span>
</code></pre></div><p>以上将会被转译为下面的样子：</p><div class="language-js"><pre><code><span class="token comment">// vite 生成的代码</span>
<span class="token keyword">const</span> modules <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token string">&#39;./dir/foo.js&#39;</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&#39;./dir/foo.js&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token string">&#39;./dir/bar.js&#39;</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&#39;./dir/bar.js&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>你可以遍历 <code>modules</code> 对象的 key 值来访问相应的模块：</p><div class="language-js"><pre><code><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> path <span class="token keyword">in</span> modules<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  modules<span class="token punctuation">[</span>path<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">mod</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> mod<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>匹配到的文件默认是懒加载的，通过动态导入实现，并会在构建时分离为独立的 chunk。如果你倾向于直接引入所有的模块（例如依赖于这些模块中的副作用首先被应用），你可以使用 <code>import.<wbr>meta.globEager</code> 代替：</p><div class="language-js"><pre><code><span class="token keyword">const</span> modules <span class="token operator">=</span> <span class="token keyword">import</span><span class="token punctuation">.</span>meta<span class="token punctuation">.</span><span class="token function">globEager</span><span class="token punctuation">(</span><span class="token string">&#39;./dir/*.js&#39;</span><span class="token punctuation">)</span>
</code></pre></div><p>以上会被转译为下面的样子：</p><div class="language-js"><pre><code><span class="token comment">// vite 生成的代码</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> __glob__0_0 <span class="token keyword">from</span> <span class="token string">&#39;./dir/foo.js&#39;</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> __glob__0_1 <span class="token keyword">from</span> <span class="token string">&#39;./dir/bar.js&#39;</span>
<span class="token keyword">const</span> modules <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token string">&#39;./dir/foo.js&#39;</span><span class="token operator">:</span> __glob__0_0<span class="token punctuation">,</span>
  <span class="token string">&#39;./dir/bar.js&#39;</span><span class="token operator">:</span> __glob__0_1
<span class="token punctuation">}</span>
</code></pre></div><p>请注意：</p><ul><li>这只是一个 Vite 独有的功能而不是一个 Web 或 ES 标准</li><li>该 Glob 模式会被当成导入标识符：必须是相对路径（以 <code>./</code> 开头）或绝对路径（以 <code>/</code> 开头，相对于项目根目录解析）。</li><li>Glob 匹配是使用 <code>fast-glob</code> 来实现的 —— 阅读它的文档来查阅 <a href="https://github.com/mrmlnc/fast-glob#pattern-syntax" target="_blank" rel="noopener noreferrer">支持的 Glob 模式</a>。</li></ul><h3 id="glob-import"><a class="header-anchor" href="#glob-import" aria-hidden="true">#</a> globEager 导入</h3><p>vue-vben-admin/src/router/<a href="https://github.com/anncwb/vue-vben-admin/blob/main/src/router/routes/index.ts" target="_blank" rel="noopener noreferrer">routes/index.ts</a> <a href="https://github.com/JacobHsu/vue-vite-admin/commit/54c01966ac57baa24fc17eea38b7870d7b997abc" target="_blank" rel="noopener noreferrer">commit</a></p><div class="language-ts"><pre><code><span class="token keyword">const</span> modules <span class="token operator">=</span> <span class="token keyword">import</span><span class="token punctuation">.</span>meta<span class="token punctuation">.</span><span class="token function">globEager</span><span class="token punctuation">(</span><span class="token string">&#39;./modules/**/*.ts&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>modules<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> mod <span class="token operator">=</span> modules<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token keyword">default</span> <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> modList <span class="token operator">=</span> <span class="token builtin">Array</span><span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>mod<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token punctuation">[</span><span class="token operator">...</span>mod<span class="token punctuation">]</span> <span class="token operator">:</span> <span class="token punctuation">[</span>mod<span class="token punctuation">]</span><span class="token punctuation">;</span>
  routeModuleList<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token operator">...</span>modList<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> asyncRoutes <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>routeModuleList<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// Basic routing without permission</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> basicRoutes <span class="token operator">=</span> <span class="token punctuation">[</span>RootRoute<span class="token punctuation">,</span> <span class="token operator">...</span>mainOutRoutes<span class="token punctuation">,</span> <span class="token operator">...</span>asyncRoutes<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="webassembly"><a class="header-anchor" href="#webassembly" aria-hidden="true">#</a> WebAssembly</h2><p>预编译的 <code>.wasm</code> 文件可以直接被导入 —— 默认导出一个函数，返回值为所导出 wasm 实例对象的 Promise：</p><div class="language-js"><pre><code><span class="token keyword">import</span> init <span class="token keyword">from</span> <span class="token string">&#39;./example.wasm&#39;</span>

<span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">exports</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  exports<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p><code>init</code> 函数还可以将传递给 <code>WebAssembly.instantiate</code> 的导入对象作为其第二个参数：</p><div class="language-js"><pre><code><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  imports<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">someFunc</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">/* ... */</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">/* ... */</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>在生产构建当中，体积小于 <code>assetInlineLimit</code> 的 <code>.wasm</code> 文件将会被内联为 base64 字符串。否则，它们将作为资源复制到 <code>dist</code> 目录中，并按需获取。</p><h2 id="web-workers"><a class="header-anchor" href="#web-workers" aria-hidden="true">#</a> Web Worker</h2><p>一个 web worker 脚本可以直接通过添加一个 <code>?worker</code> 或 <code>?sharedworker</code> 查询参数来导入。默认导出一个自定义的 worker 构造器：</p><div class="language-js"><pre><code><span class="token keyword">import</span> MyWorker <span class="token keyword">from</span> <span class="token string">&#39;./worker?worker&#39;</span>

<span class="token keyword">const</span> worker <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyWorker</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>Worker 脚本也可以使用 <code>import</code> 语句来替代 <code>importScripts()</code> —— 注意，在开发过程中，这依赖于浏览器原生支持，目前只在 Chrome 中适用，而在生产版本中，它已经被编译掉了。</p><p>默认情况下，worker 脚本将在生产构建中编译成单独的 chunk。如果你想将 worker 内联为 base64 字符串，请添加 <code>inline</code> 查询参数：</p><div class="language-js"><pre><code><span class="token keyword">import</span> MyWorker <span class="token keyword">from</span> <span class="token string">&#39;./worker?worker&amp;inline&#39;</span>
</code></pre></div><h2 id="build-optimizations"><a class="header-anchor" href="#build-optimizations" aria-hidden="true">#</a> 构建优化</h2><blockquote><p>下面所罗列的功能会自动应用为构建过程的一部分，除非你想禁用它们，否则没有必要显式配置。</p></blockquote><h3 id="css-code-splitting"><a class="header-anchor" href="#css-code-splitting" aria-hidden="true">#</a> CSS 代码分割</h3><p>Vite 会自动地将一个异步 chunk 模块中使用到的 CSS 代码抽取出来并为其生成一个单独的文件。这个 CSS 文件将在该异步 chunk 加载完成时自动通过一个 <code>&lt;link&gt;</code> 标签载入，该异步 chunk 会保证只在 CSS 加载完毕后再执行，避免发生 <a href="https://en.wikipedia.org/wiki/Flash_of_unstyled_content#:~:text=A%20flash%20of%20unstyled%20content,before%20all%20information%20is%20retrieved." target="_blank" rel="noopener noreferrer">FOUC</a> 。</p><p>如果你更倾向于将所有的 CSS 抽取到一个文件中，你可以通过设置 <a href="/config/#build-csscodesplit"><code>build.cssCodeSplit</code></a> 为 <code>false</code> 来禁用 CSS 代码分割。</p><h3 id="preload-directives-generation"><a class="header-anchor" href="#preload-directives-generation" aria-hidden="true">#</a> 预加载指令生成</h3><p>Vite 会为入口 chunk 和它们在打包出的 HTML 中的直接引入自动生成 <code>&lt;link rel=&quot;modulepreload&quot;&gt;</code> 指令。</p><h3 id="async-chunk-loading-optimization"><a class="header-anchor" href="#async-chunk-loading-optimization" aria-hidden="true">#</a> 异步 Chunk 加载优化</h3><p>在实际项目中，Rollup 通常会生成 “共用” chunk —— 被两个或以上的其他 chunk 共享的 chunk。与动态导入相结合，会很容易出现下面这种场景：</p><p><img src="/vite-docs/assets/graph.8f2f36b7.png" alt="graph"></p><p>在无优化的情境下，当异步 chunk <code>A</code> 被导入时，浏览器将必须请求和解析 <code>A</code>，然后它才能弄清楚它也需要共用 chunk <code>C</code>。这会导致额外的网络往返：</p><div class="language-"><pre><code>Entry ---&gt; A ---&gt; C
</code></pre></div><p>Vite 将使用一个预加载步骤自动重写代码，来分割动态导入调用，以实现当 <code>A</code> 被请求时，<code>C</code> 也将 <strong>同时</strong> 被请求：</p><div class="language-"><pre><code>Entry ---&gt; (A + C)
</code></pre></div><p><code>C</code> 也可能有更深的导入，在未优化的场景中，这会导致更多的网络往返。Vite 的优化会跟踪所有的直接导入，无论导入的深度如何，都能够完全消除不必要的往返。</p></div></div><footer class="page-footer" data-v-2b25a7d0 data-v-ad063ca8><div class="edit" data-v-ad063ca8><div class="edit-link" data-v-ad063ca8 data-v-1501f284><a class="link" href="https://github.com/vitejs/docs-cn/edit/main/guide/features.md" target="_blank" rel="noopener noreferrer" data-v-1501f284>为此页提供修改建议 <svg class="icon outbound icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-1501f284><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div><div class="updated" data-v-ad063ca8><!----></div></footer><div class="next-and-prev-link" data-v-2b25a7d0 data-v-01ae7502><div class="container" data-v-01ae7502><div class="prev" data-v-01ae7502><a class="link" href="/vite-docs/guide/" data-v-01ae7502><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon icon-prev" data-v-01ae7502><path d="M19,11H7.4l5.3-5.3c0.4-0.4,0.4-1,0-1.4s-1-0.4-1.4,0l-7,7c-0.1,0.1-0.2,0.2-0.2,0.3c-0.1,0.2-0.1,0.5,0,0.8c0.1,0.1,0.1,0.2,0.2,0.3l7,7c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3c0.4-0.4,0.4-1,0-1.4L7.4,13H19c0.6,0,1-0.4,1-1S19.6,11,19,11z"></path></svg><span class="text" data-v-01ae7502>开始</span></a></div><div class="next" data-v-01ae7502><a class="link" href="/vite-docs/guide/using-plugins" data-v-01ae7502><span class="text" data-v-01ae7502>使用插件</span><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon icon-next" data-v-01ae7502><path d="M19.9,12.4c0.1-0.2,0.1-0.5,0-0.8c-0.1-0.1-0.1-0.2-0.2-0.3l-7-7c-0.4-0.4-1-0.4-1.4,0s-0.4,1,0,1.4l5.3,5.3H5c-0.6,0-1,0.4-1,1s0.4,1,1,1h11.6l-5.3,5.3c-0.4,0.4-0.4,1,0,1.4c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3l7-7C19.8,12.6,19.9,12.5,19.9,12.4z"></path></svg></a></div></div></div><!--[--><!--]--></div></main></div><!----><!--]--></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"readme.md\":\"1b3c9128\",\"index.md\":\"6c99f27b\",\"blog_announcing-vite2.md\":\"09d22807\",\"config_index.md\":\"71523e0e\",\"guide_api-hmr.md\":\"d6fa47f1\",\"guide_api-javascript.md\":\"ccdf069d\",\"guide_api-plugin.md\":\"94db028f\",\"guide_assets.md\":\"e17a9013\",\"guide_backend-integration.md\":\"f80dc0cd\",\"guide_build.md\":\"3a6ff032\",\"guide_comparisons.md\":\"83bbcd43\",\"guide_dep-pre-bundling.md\":\"9b9a32ab\",\"guide_env-and-mode.md\":\"4c5f552a\",\"guide_features.md\":\"32107325\",\"guide_index.md\":\"5f04d8ad\",\"guide_migration.md\":\"dc64cac1\",\"guide_ssr.md\":\"d5428dc2\",\"guide_static-deploy.md\":\"7b611ba7\",\"guide_using-plugins.md\":\"0205b0fa\",\"guide_why.md\":\"b9253a61\",\"plugins_index.md\":\"27597d7b\"}")</script>
    <script type="module" async src="/vite-docs/assets/app.a2203fca.js"></script>
  </body>
</html>